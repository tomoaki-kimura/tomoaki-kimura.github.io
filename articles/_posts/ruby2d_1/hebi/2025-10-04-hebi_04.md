---
layout: post
part: Ruby2D(1)
title: ヘビゲーム
categories: [ruby2d_1, hebi]
chapter: 1
section: 4
section_title: 自機の動作方向を増やす
description: 最初のステップ。スクラッチの始め方を紹介します。
---

## {{ page.section_title }}

### 継続的に移動する

main.rb
```
(略)
x_flug = true
y_flug = false

on :key_down do |event|
  # 右上に移動の時
  if x_flug && !y_flug
    case event.key
    when "right"
      y_flug = true
    when "left"
      x_flug = false
    end
  # 左上に移動の時
  elsif !x_flug && !y_flug
    case event.key
    when "right"
      x_flug = true
    when "left"
      y_flug = true
    end
  # 右下に移動の時
  elsif x_flug && y_flug
    case event.key
    when "right"
      x_flug = false
    when "left"
      y_flug = false
    end
  # 左下に移動の時
  elsif !x_flug && y_flug
    case event.key
    when "right"
      y_flug = false
    when "left"
      x_flug = true
    end
  end
end

update do
  if x_flug
(略)
```

### ファイルの実行

bash
```
$ ruby main.rb
```

### 結果

自機がボタン左右で自由に斜めに操作できる。

#### *ここで試したいこと

- 画面からはみ出ても戻れるのか。

### ここまでのコード

main.rb
```
require "ruby2d"

head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2
speed = 1
x_flug = true
y_flug = false

on :key_down do |event|
  # 右上に移動の時
  if x_flug && !y_flug
    case event.key
    when "right"
      y_flug = true
    when "left"
      x_flug = false
    end
  # 左上に移動の時
  elsif !x_flug && !y_flug
    case event.key
    when "right"
      x_flug = true
    when "left"
      y_flug = true
    end
  # 右下に移動の時
  elsif x_flug && y_flug
    case event.key
    when "right"
      x_flug = false
    when "left"
      y_flug = false
    end
  # 左下に移動の時
  elsif !x_flug && y_flug
    case event.key
    when "right"
      y_flug = false
    when "left"
      x_flug = true
    end
  end
end

update do
  if x_flug
    head.x += speed
  else
    head.x -= speed
  end
  if y_flug
    head.y += speed
  else
    head.y -= speed
  end
end

show
```
