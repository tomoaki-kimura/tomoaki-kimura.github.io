---
layout: post
part: Ruby2D(1)
title: ヘビゲーム
categories: [ruby2d_1, hebi]
chapter: 1
section: 3
section_title: 自機を動かす
description: 画面の中を動かすための方法として、キーバインドや、updateメソッドについて学びます。
---

## {{ page.section_title }}

### キーイベントの取得

main.rb
```
require "ruby2d"

head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2

on :key_down do |event|
  p event.key
end

show
```

### ファイルの実行

bash
```
$ ruby main.rb
```

### 結果

押したキーがターミナルに出力される。

#### *ここで試したいこと

- `right` `left` キーの出力を確認する。

### イベントに動作を付加

main.rb
```
require "ruby2d"

head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2

on :key_down do |event|
  if event.key == "right"
    head.x += 10
  elsif event.key == "left"
    head.x -= 10
  end
end

show
```

### ファイルの実行

bash
```
$ ruby main.rb
```

### 結果

ボタン押下で移動。

#### *ここで試したいこと

- 移動スピードの数値を変更する。

### 継続的に移動する

main.rb
```
require "ruby2d"

head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2
speed = 1
x_flug = true
y_flug = false

on :key_down do |event|
  if event.key == "right"
    x_flug = true
    y_flug = false
  elsif event.key == "left"
    x_flug = false
    y_flug = false
  end
end

update do
  if x_flug
    head.x += speed
  else
    head.x -= speed
  end
  if y_flug
    head.y += speed
  else
    head.y -= speed
  end
end

show
```

### ファイルの実行

bash
```
$ ruby main.rb
```

### 結果

自機がボタン左右で斜めに移動しながら上に移動。

#### *ここで試したいこと

- 再度移動スピードの数値を変更する。
