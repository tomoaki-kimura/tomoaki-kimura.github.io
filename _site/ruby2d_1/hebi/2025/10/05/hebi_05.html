<!DOCTYPE html>
<html lang="ja">
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title> 
      ヘビゲーム | HearthSide KidsPrograming School
    </title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script type="module" src="/assets/js/main.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>
    <div class="fixed w-screen py-2 px-4 hg-white flex items-center shadow-md shadow-black/5 bg-gray-900">
  <ul class="flex items-center ml-auto">
    <li class="mr-2">
      <a href="/" class="text-gray-300 text-sm hover:text-gray-100">
        HearthSide Kids Programing School
      </a>
    </li>
  </ul>
</div>

    <div class="pt-10">
      <div class="flex h-screen">
  <aside class="fixed left-0 top-0 w-64 h-full bg-gray-900">
    


<ul class="mt-4 side-column-close hidden">
  <li class="mb-1 group active">
    <div class="flex">
      <a href="" class="current-part-link flex items-center py-2 px-1 text-gray-300 hover:bg-gray-950 rounded-md group-[.active]:text-white">
        <span class="text-sm"><br><br></span>
      </a>
      <button type="button" class="text-gray-300 toggle-menu-close">
        <i class="ri-arrow-right-circle-fill mr-4"></i>
      </button>
    </div>
  </li>
</ul>

<ul class="mt-4 side-column-open">
  <li class="mb-1 group active">
    <div class="flex">
      <a href="/ruby2d_1.html?chapter=hebi" class="current-part-link flex items-center py-2 px-4 text-gray-300 hover:bg-gray-950 rounded-md group-[.active]:text-white">
        <i class="lo-ruby-line mr-3 text-lg"></i>
        <span class="text-lg current-course-name">Ruby2D(1)</span>
      </a>
      <button type="button" class="text-gray-300 ml-auto toggle-menu-open">
        <i class="ri-arrow-left-circle-fill mr-4"></i>
      </button>
    </div>
  </li>

  <li class="mb-1 group" data-state-opened>
    <p class="flex items-center py-2 px-4 text-gray-300 rounded-md">
      <i class=" mr-3 text-lg side-column-lo-icon"></i>
      <span class="text-xl">chapter1 :</span>
      <span class="text-xl">ヘビゲーム</span>
    </p>
    <ul class="chapters pl-7 mt-2 hidden group-data-[state-opened]:block">
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/01/hebi_01.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section1:<br>ファイルの作成
          </a>
        </li>
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/02/hebi_02.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section2:<br>自機をCircleクラスで作る
          </a>
        </li>
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/03/hebi_03.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section3:<br>自機を動かす
          </a>
        </li>
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/04/hebi_04.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section4:<br>自機の動作方向を増やす
          </a>
        </li>
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/05/hebi_05.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section5:<br>ゲームオーバーを作る
          </a>
        </li>
        
      
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/06/hebi_06.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section6:<br>リスタートできるようにする
          </a>
        </li>
        
      
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/07/hebi_07.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section7:<br>追従する胴体を作る
          </a>
        </li>
        
      
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/08/hebi_08.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section8:<br>胴体の判定を作る
          </a>
        </li>
        
      
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/09/hebi_09.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section9:<br>ヘビが成長するアイテムを作る
          </a>
        </li>
        
      
        
        <li class="mb-4">
          <a href="/ruby2d_1/hebi/2025/10/10/hebi_10.html" class="chapter  text-gray-300 text-sm flex items-center hover:text-gray-100 before:contents-[''] before:w-1 before:h-1 before:rounded-full before:bg-gray-300 before:mr-3">
            section10:<br>アイテム取得後に胴体を伸ばす
          </a>
        </li>
        
        
    </ul>
  </li>
</ul>

  </aside>
  <main id="content" class="w-screen ml-64 min-h-screen">
    
<div class="mt-1 ml-5">
  <span class="bread-course hidden">
    <a class="">ヘビゲーム</a>
  </span>
  <span class="bread-part hidden">
    <i class="ri-arrow-drop-right-fill"></i>
    <a class="">ヘビゲーム</a>
  </span>
  <span class="bread-chapter hidden">
    <i class="ri-arrow-drop-right-fill"></i>
    <a class="">ヘビゲーム</a>
  </span>
  <span class="bread-section hidden">
    <i class="ri-arrow-drop-right-fill"></i>
    <a class="">ゲームオーバーを作る</a>
  </span>
</div>

<div class="mx-10 my-10">
  <h1 class="text-4xl font-bold">
    
      <p>chapter : 1 ヘビゲーム</p>
    
    <p class="text-3xl mt-8 ml-5 page-chapter">
      
        <span class="">section5</span>
      
    </p>
  </h1>
  <div class="mt-5 ml-5">
    <p>
      
        このセクションで学ぶ内容：
      
      最初のステップ。スクラッチの始め方を紹介します。
    </p>
  </div>
</div>


    <div class="markdown-body m-10">
      <h2 id="ゲームオーバーを作る">ゲームオーバーを作る</h2>

<h3 id="ステータスを管理する">ステータスを管理する</h3>

<p>main.rb</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(略)
speed = 1
x_flug = true
y_flug = false
status = :stop

on :key_down do |event|
  # ゲームスタート
  if event.key == "right" || event.key == "left"
    status = :game_start if status == :stop
  end
  # 右上に移動の時
  if x_flug &amp;&amp; !y_flug
    case event.key
(略)

(略)
update do
  case status
  when :game_start
    if x_flug
      head.x += speed
    else
      head.x -= speed
    end
    if y_flug
      head.y += speed
    else
      head.y -= speed
    end
  end
  p status
end

show
</code></pre></div></div>

<h3 id="ファイルの実行">ファイルの実行</h3>

<p>bash</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ruby main.rb
</code></pre></div></div>

<h3 id="結果">結果</h3>

<p>スタート時は動かず、移動押下で初動。</p>

<p>この時、ターミナルに表示されているフラグが、 <code class="language-plaintext highlighter-rouge">:stop</code> から <code class="language-plaintext highlighter-rouge">:game_start</code> に変化。</p>

<h3 id="壁に当たった時のステータス">壁に当たった時のステータス</h3>

<p>main.rb</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(略)
y_flug = false
status = :stop

def hit(head)
  # 上の当たり判定
  top = head.contains?(head.x, 0)
  # 下の当たり判定
  bottom = head.contains?(head.x, Window.height)
  # 右の当たり判定
  right = head.contains?(Window.width, head.y)
  # 左の当たり判定
  left = head.contains?(0, head.y)
  top || bottom || right || left
end

on :key_down do |event|
(略)

(略)
update do
  case status
  when :game_start
    # 当たり判定
    if hit(head)
      status = :game_over
    end
    # 移動方向の管理
    if x_flug
      head.x += speed
    else
      head.x -= speed
    end
    if y_flug
      head.y += speed
    else
      head.y -= speed
    end
  end
end

show
</code></pre></div></div>

<h3 id="ファイルの実行-1">ファイルの実行</h3>

<p>bash</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ruby main.rb
</code></pre></div></div>

<h3 id="結果-1">結果</h3>

<p>自機が壁に当たるとターミナルに <code class="language-plaintext highlighter-rouge">:game_over</code> が表示され、動きも止まる。</p>

<h3 id="ゲームスタートのステータス">ゲームスタートのステータス</h3>

<p>main.rb</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(略)
on :key_down do |event|
  # ゲームスタート
  if event.key == "right" || event.key == "left"
    status = :game_start if status == :stop
  end
  # 右上に移動の時
  if x_flug &amp;&amp; !y_flug
    case event.key
(略)
</code></pre></div></div>

<h3 id="ファイルの実行-2">ファイルの実行</h3>

<p>bash</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ruby main.rb
</code></pre></div></div>

<h3 id="結果-2">結果</h3>

<p>スタート時は動かず、移動押下で初動。</p>

<p>この時、ターミナルに表示されているフラグが、 <code class="language-plaintext highlighter-rouge">:stop</code> から <code class="language-plaintext highlighter-rouge">:game_start</code> に変化。</p>

<h3 id="ゲームオーバーのメッセージを表示する">ゲームオーバーのメッセージを表示する</h3>

<p>main.rb</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require "ruby2d"

# ヘビの頭
head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2
speed = 1
x_flug = true
y_flug = false
status = :stop

# ゲームオーバー画面
message = [
  Text.new("GAME OVER", size: 30, x: 220, y: 150),
  Text.new("press key 'R' to restart", size: 20, x: 205, y: 300)
]
message.each { |text| text.remove }

def hit(head)
(略)

(略)
update do
  case status
  when :game_start
    # 当たり判定
    if hit(head)
      status = :game_over
      message.each { |text| text.add }
    end
    # 移動方向の管理
(略)
</code></pre></div></div>

<h3 id="ファイルの実行-3">ファイルの実行</h3>

<p>bash</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ruby main.rb
</code></pre></div></div>

<h3 id="結果-3">結果</h3>

<p>自機が壁に当たるとゲームオーバー画面になる。</p>

<p>うまくいったらここで、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>p status
</code></pre></div></div>

<p>は不要になるので、削除しておきます。</p>

<h4 id="ここで試したいこと">*ここで試したいこと</h4>

<ul>
  <li>ゲームオーバー画面の文字の大きさを変えたら、文字の場所がどうなるか確認する。</li>
</ul>

<h3 id="ここまでのコード">ここまでのコード</h3>

<p>main.rb</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require "ruby2d"

head = Circle.new(radius: 10)
head.x = Window.width / 2
head.y = Window.height / 2
speed = 1
status = :stop
message = [
  Text.new("GAME OVER", size: 30, x: 220, y: 150),
  Text.new("press key 'R' to restart", size: 20, x: 205, y: 300)
]
message.each { |text| text.remove }

x_flug = true
y_flug = false

def hit(head)
  #上の当たり判定
  top = head.contains?(head.x, 0)
  #下の当たり判定
  bottom = head.contains?(head.x, Window.height)
  #右の当たり判定
  right = head.contains?(Window.width, head.y)
  #左の当たり判定
  left = head.contains?(0, head.y)
  top || bottom || right || left
end

on :key_down do |event|
  #ゲームスタート
  if event.key == "right" || event.key == "left"
    status = :game_start if status == :stop
  end
  #右上に移動の時
  if x_flug &amp;&amp; !y_flug
    case event.key
    when "right"
      y_flug = true
    when "left"
      x_flug = false
    end
  #左上に移動の時
  elsif !x_flug &amp;&amp; !y_flug
    case event.key
    when "right"
      x_flug = true
    when "left"
      y_flug = true
    end
  #右下に移動の時
  elsif x_flug &amp;&amp; y_flug
    case event.key
    when "right"
      x_flug = false
    when "left"
      y_flug = false
    end
  #左下に移動の時
  elsif !x_flug &amp;&amp; y_flug
    case event.key
    when "right"
      y_flug = false
    when "left"
      x_flug = true
    end
  end
end

update do
  case status
  when :game_start
    #当たり判定
    if hit(head)
      status = :game_over
      message.each { |text| text.add }
    end
    #移動方向の管理
    if x_flug
      head.x += speed
    else
      head.x -= speed
    end
    if y_flug
      head.y += speed
    else
      head.y -= speed
    end
  end
end

show
</code></pre></div></div>

    </div>
    <nav class="page-turns flex justify-between p-10">
  <div>
  <a href="" class="previous-link hidden">
    <i class="ri-arrow-left-double-fill"></i>
    <span>前のチャプター</span>
  </a>
  </div>
  <div>
  <a href="" class="next-link hidden">
    <span>次のチャプター</span>
    <i class="ri-arrow-right-double-fill"></i>
  </a>
  </div>
</nav>

  </main>
</div>

    </div>
        
<div class="courses-data hidden" data-courses="{{ site.courses | replace: '"', '\'}}"></div>
<div class="curriculums-data hidden" data-curriculums="{{ site.curriculums | replace: '"', '\'}}"></div>

<script>
  const COURSES_DATA = JSON.parse(document.querySelector('.courses-data').dataset.courses.replaceAll("\\", '"').replaceAll("=>", ":"))
  const CURRICULUMS_DATA = JSON.parse(document.querySelector('.curriculums-data').dataset.curriculums.replaceAll("\\", '"').replaceAll("=>", ":"))
  console.log(CURRICULUMS_DATA)
  const currentCourse = sessionStorage.getItem('currentCourse')
  const currentUrl = new URL(location.href)
</script>


  </body>
</html>
